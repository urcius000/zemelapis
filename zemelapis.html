<!DOCTYPE html>
<html lang="lt">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Lietuvos žemėlapis – Simplemaps</title>
  <style>
    html,body{margin:0;background:#fff;font-family:system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;color:#000}
    #map{max-width:1000px;margin:24px auto}
  </style>
</head>
<body>
  <div id="map"></div>

  <!-- 1) Simplemaps biblioteka (iš tavo ZIP) -->
  <script src="./simplemaps_countrymap.js"></script>

  <!-- 2) Tavo Lietuvos duomenys (iš ZIP) -->
  <script src="./mapdata.js"></script>

  <!-- 3) Perrašom spalvas ir Panevėžio tooltip -->
  <script>
    // Paleidžiam, kai Simplemaps užkrauna žemėlapį
    window.addEventListener('DOMContentLoaded', function() {
      // 1) Visi regionai – pilki (default)
      if (window.simplemaps_countrymap_mapdata && simplemaps_countrymap_mapdata.main_settings) {
        simplemaps_countrymap_mapdata.main_settings.background_color = "#FFFFFF";
        simplemaps_countrymap_mapdata.main_settings.state_color = "#BDBDBD";       // pilka
        simplemaps_countrymap_mapdata.main_settings.state_hover_color = "#BDBDBD"; // jokio hover tono keitimo
        simplemaps_countrymap_mapdata.main_settings.border_color = "#424242";
        simplemaps_countrymap_mapdata.main_settings.popups = "on_hover";
        simplemaps_countrymap_mapdata.main_settings.div = "map";
        simplemaps_countrymap_mapdata.main_settings.width = "responsive";
      }

      // 2) Surandam Panevėžį pagal pavadinimą ir nudažom žaliai + tooltip "Mediena"
      (function markPanevezys(){
        const data = window.simplemaps_countrymap_mapdata || {};
        const states = data.state_specific || {};
        const want = ["panevėž", "panevez"]; // ieškom pavadinime (LT/EN be diakritikų)

        const norm = s => (s||"")
          .toLowerCase()
          .replaceAll("ė","e").replaceAll("ž","z").replaceAll("š","s").replaceAll("ą","a")
          .replaceAll("ę","e").replaceAll("į","i").replaceAll("ų","u").replaceAll("ū","u")
          .replaceAll("č","c");

        // bandome rasti atitinkančią „state_specific“ reikšmę
        let foundKey = null;
        for (const key in states) {
          const name = states[key]?.name || "";
          const n = norm(name);
          if (want.some(w => n.includes(w))) {
            foundKey = key;
            break;
          }
        }

        if (!foundKey) {
          console.warn("Panevėžys nerastas state_specific – patikrink mapdata.js pavadinimus/ID.");
          return;
        }

        // Nustatom žalią spalvą ir hover tekstą "Mediena"
        states[foundKey] = {
          ...(states[foundKey] || {}),
          color: "#1e8e3e",
          hover: "Mediena"
        };
      })();

      // 3) Inicijuojam žemėlapį
      if (window.simplemaps_countrymap && simplemaps_countrymap.load) {
        simplemaps_countrymap.load();
      } else {
        console.error("Simplemaps biblioteka neįsikrovė.");
      }
    });
  </script>
</body>
</html>







